(this.webpackJsonpreact2=this.webpackJsonpreact2||[]).push([[0],{143:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),r=t(65),c=t.n(r),s=(t(83),t(6)),o=t(24),m=t(3),i=t(4),u=t.n(i),d=(t(47),Object(n.createContext)(null));function p(){return Object(n.useContext)(d)}var v=function(){var e=p().idToken;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h3",null,"Enter Tags:"))),l.a.createElement("form",{onSubmit:function(a){console.log(e),a.preventDefault();for(var t=[],n=0;n<u()("#searchForm").find("input").length;n++)""!=u.a.trim(u()("#searchForm").find("input").eq(n).val())&&t.push(u()("#searchForm").find("input").eq(n).val().toLowerCase());var l={objects:t};u.a.ajaxSetup({beforeSend:function(a){a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization",e)}}),u.a.ajax({url:"https://igi38i99gg.execute-api.us-east-1.amazonaws.com/query/objects",method:"POST",data:JSON.stringify(l),success:function(e){if(u()("#resultsBody").empty(),e.links.length>0)for(var a=0;a<e.links.length;a++)u()("#resultsBody").append("<tr><td>"+(a+1)+"</td><td><a href='"+e.links[a]+"' target='_blank'>"+e.links[a]+"</a></td></tr>");else u()("#resultsBody").append("<tr><td colspan='2'>No results found!</td></tr>");u()("#resultsRow").removeClass("d-none")}})},id:"searchForm"},l.a.createElement("div",{className:"row",id:"tagsBlock"},l.a.createElement("div",{className:"col-12 col-md-2"},l.a.createElement("label",{htmlFor:"tag_1"},"Tag: ")),l.a.createElement("div",{className:"col-12 col-md-10"},l.a.createElement("input",{id:"tag_1",name:"tags[]",className:"form-control"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{className:"btn btn-info",type:"button",onClick:function(){return function(){var e=parseInt(u()("#tagsBlock").find("input").last().attr("id").split("_")[1])+1,a='<div class="col-12 col-md-2"><label for="tag_'+e+'">Tag: </label></div><div class="col-12 col-md-10"><input id="tag_'+e+'" name="tags[]" class="form-control"></div>';u()("#tagsBlock").append(a)}()}},"Add another tag"))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{className:"btn btn-primary"},"Search")))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row d-none",id:"resultsRow"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h3",null,"Results:")),l.a.createElement("table",{className:"table table-bordered table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"URL"))),l.a.createElement("tbody",{id:"resultsBody"})))))},E=t(10),b=t.n(E),g=t(20),f=t(66),h=t.n(f);var N=function(){var e=p().idToken,a=Object(n.useState)(null),t=Object(s.a)(a,2),r=t[0],c=t[1],o=function(e){return new Promise((function(a,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return a(n.result)},n.onerror=function(e){return t(e)}}))};function m(){return(m=Object(g.a)(b.a.mark((function a(t){var n,l,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),console.log(e),n=document.querySelector("#customFile").files[0],l=n.name.replace(/C:\\fakepath\\/,""),c(l),a.next=7,o(n);case 7:s=(s=a.sent).split(",")[1],JSON.stringify({name:r,file:s}),u.a.ajaxSetup({beforeSend:function(a){a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization",e)}}),u.a.ajax({method:"POST",url:"https://yr4b7rndbk.execute-api.us-east-1.amazonaws.com/new/test3",data:JSON.stringify({name:l,file:s}),success:function(e){if(console.log(e.url),!e.message){if(document.getElementById("urlPlaceholder").innerHTML='<a href="'+e.url+'">'+e.url+"</a>",e.tags.length>0){for(var a="<ul>",t=0;t<e.tags.length;t++)a+="<li>"+e.tags[t]+"</li>";a+="</ul>",document.getElementById("tagsPlaceholder").innerHTML=a}else document.getElementById("tagsPlaceholder").innerHTML="No tags were identified.";document.getElementById("resultsRow").classList.remove("d-none")}}});case 12:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return h.a.init(),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h3",null,"Select an image:"))),l.a.createElement("form",{onSubmit:function(e){return m.apply(this,arguments)}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-9 mt-3"},l.a.createElement("div",{className:"custom-file"},l.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){return c(e.target.value)}}),l.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose file"))),l.a.createElement("div",{className:"col-12 col-md-3 mt-3"},l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Upload")))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row d-none",id:"resultsRow"},l.a.createElement("div",{className:"col-12"},l.a.createElement("p",null,"Your image is at: ",l.a.createElement("span",{id:"urlPlaceholder"})),l.a.createElement("p",null,"The tags for this image are:"),l.a.createElement("div",{id:"tagsPlaceholder"})))))},y=t(147);var w=function(){var e=p(),a=e.userHasAuthenticated,t=e.setGivenName,r=e.setFamilyName,c=e.setIdToken,o=Object(n.useState)(""),m=Object(s.a)(o,2),i=m[0],u=m[1],d=Object(n.useState)(""),v=Object(s.a)(d,2),E=v[0],f=v[1],h=Object(n.useState)("signIn"),N=Object(s.a)(h,2),w=N[0],k=N[1],S=Object(n.useState)(""),j=Object(s.a)(S,2),x=j[0],O=j[1],C=Object(n.useState)(""),T=Object(s.a)(C,2),F=T[0],P=T[1],A=Object(n.useState)(""),I=Object(s.a)(A,2),B=I[0],R=I[1],q=Object(n.useState)(""),H=Object(s.a)(q,2),_=H[0],L=H[1],U=Object(n.useState)(""),D=Object(s.a)(U,2),z=D[0],J=D[1],W=Object(n.useState)(""),G=Object(s.a)(W,2),M=G[0],$=G[1];function Y(){return(Y=Object(g.a)(b.a.mark((function e(n){var l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,y.a.signIn(i,E);case 4:l=e.sent,console.log(l),a(!0),t(l.attributes.given_name),r(l.attributes.family_name),c(l.signInUserSession.idToken.jwtToken),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Z(){return new RegExp("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{8,}$").test(F)?(console.log(F,B),F==B?(console.log("match"),0):(console.log("No match"),2)):(console.log("Fail"),1)}function K(){return(K=Object(g.a)(b.a.mark((function e(a){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),0!=(t=Z())){e.next=15;break}return e.prev=3,e.next=6,y.a.signUp({username:x,password:F,attributes:{family_name:z,given_name:_}});case 6:n=e.sent,console.log({user:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("error signing up:",e.t0);case 13:e.next=23;break;case 15:if(1!=t){e.next=20;break}return window.alert("Password must contain one uppercase letter, one lowercase letter and one number"),e.abrupt("return",!1);case 20:if(2!=t){e.next=23;break}return window.alert("Passwords do not match"),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function Q(){return(Q=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,y.a.confirmSignUp(x,M);case 3:k("signIn");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return"signIn"==w?l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar navbar-light text-white bg-primary"},l.a.createElement("h2",null,"TagStore")),l.a.createElement("div",{className:"container mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-4 offset-md-4"},l.a.createElement("form",{className:"form-signin text-center",onSubmit:function(e){return Y.apply(this,arguments)}},l.a.createElement("h1",{className:"display-4"},"TagStore"),l.a.createElement("h4",{className:"mb-3 font-weight-normal"},"Please sign in"),l.a.createElement("label",{className:"sr-only"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",value:i,onChange:function(e){return u(e.target.value)},placeholder:"Email address",required:!0,autoFocus:!0}),l.a.createElement("label",{className:"sr-only"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",value:E,onChange:function(e){return f(e.target.value)},placeholder:"Password",required:!0}),l.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Sign in"),l.a.createElement("hr",null),l.a.createElement("p",null,"Don't have an account?"),l.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return k("signUp")}},"Sign up!"),l.a.createElement("hr",null),l.a.createElement("p",null,"Have a confirmation code?"),l.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return k("activate")}},"Activate account")))))):"signUp"==w?l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar navbar-light text-white bg-primary"},l.a.createElement("h2",null,"TagStore")),l.a.createElement("div",{className:"container mt-3"},l.a.createElement("form",{onSubmit:function(e){return K.apply(this,arguments)}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h3",null,"Personal Details"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"firstName"},"First Name"),l.a.createElement("input",{type:"text",value:_,onChange:function(e){return L(e.target.value)},className:"form-control"}))),l.a.createElement("div",{className:"col-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"lastName"},"Last Name"),l.a.createElement("input",{type:"text",value:z,onChange:function(e){return J(e.target.value)},className:"form-control"})))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h3",null,"Login Credentials"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"email"},"Email"),l.a.createElement("input",{type:"email",value:x,onChange:function(e){return O(e.target.value)},className:"form-control"})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"password"},"Password"),l.a.createElement("input",{type:"password",value:F,onChange:function(e){return P(e.target.value)},className:"form-control"}))),l.a.createElement("div",{className:"col-12 col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{for:"confirmPassword"},"Confirm Password"),l.a.createElement("input",{type:"password",value:B,onChange:function(e){return R(e.target.value)},className:"form-control"})))),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-12 col-md-4"},l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Sign-up")))))):l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar navbar-light text-white bg-primary"},l.a.createElement("h2",null,"TagStore")),l.a.createElement("div",{className:"container mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-md-4 offset-md-4"},l.a.createElement("form",{className:"form-signin text-center",onSubmit:function(e){return Q.apply(this,arguments)}},l.a.createElement("h1",{className:"display-4"},"TagStore"),l.a.createElement("h4",{className:"mb-3 font-weight-normal"},"Activate Account"),l.a.createElement("label",{className:"sr-only"},"Email Address"),l.a.createElement("input",{type:"email",className:"form-control",value:x,onChange:function(e){return O(e.target.value)},placeholder:"Email Address",required:!0,autoFocus:!0}),l.a.createElement("label",{className:"sr-only"},"Activation Code"),l.a.createElement("input",{type:"text",className:"form-control",value:M,onChange:function(e){return $(e.target.value)},placeholder:"Activation Code",required:!0,autoFocus:!0}),l.a.createElement("button",{className:"btn btn-primary btn-block"},"Activate account"))))))};var k=function(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!1),i=Object(s.a)(c,2),u=i[0],p=i[1],E=Object(n.useState)(!1),b=Object(s.a)(E,2),g=b[0],f=b[1],h=Object(n.useState)(!1),y=Object(s.a)(h,2),k=y[0],S=y[1];return t?l.a.createElement(d.Provider,{value:{isAuthenticated:t,userHasAuthenticated:r,givenName:u,setGivenName:p,familyName:g,setFamilyName:f,idToken:k,setIdToken:S}},l.a.createElement(o.a,null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark text-white bg-primary"},l.a.createElement("h2",null,"TagStore"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{className:"navbar-nav ml-auto"},l.a.createElement("li",{className:"nav-item bg-light text-primary rounded px-3",style:{lineHeight:"42px"}},"Welcome, ",u+" "+g,"!"),l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{to:"/",exact:!0,className:"nav-link",activeClassName:"active"},"Image Upload")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(o.b,{to:"/searchByTags",exact:!0,className:"nav-link",activeClassName:"active"},"Search By Tags")),l.a.createElement("li",{className:"nav-item"},l.a.createElement("button",{className:"nav-link btn btn-default",onClick:function(){r(!1)}},"Logout"))))),l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/",exact:!0,component:N}),l.a.createElement(m.a,{path:"/searchByTags",exact:!0,component:v})))):l.a.createElement(d.Provider,{value:{isAuthenticated:t,userHasAuthenticated:r,givenName:u,setGivenName:p,familyName:g,setFamilyName:f,idToken:k,setIdToken:S}},l.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(32).a.configure({Auth:{mandatorySignIn:!0,region:"us-east-1",userPoolId:"us-east-1_Uhsl65aWl",userPoolWebClientId:"737ehjikfr2e4qf1v4fpui4ukt"}}),c.a.render(l.a.createElement(o.a,null,l.a.createElement(k,null)),document.getElementById("appRoot")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,a,t){e.exports=t(143)},83:function(e,a,t){}},[[78,1,2]]]);
//# sourceMappingURL=main.8391848b.chunk.js.map